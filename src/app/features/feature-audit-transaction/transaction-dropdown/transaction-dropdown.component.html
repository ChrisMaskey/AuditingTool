<!-- Dropdown Placeholder with Reset Button -->
<div class="transaction-dropdown-placeholder">
  <!-- Dropdown placeholder -->

  <div
    class="flex items-center justify-between w-full"
    (click)="toggleDropdown()"
  >
    <h5 class="text-sm font-medium leading-[1.3125rem]">
      Search your transaction here
    </h5>
    <!-- Filter Icon -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="18"
      height="18"
      viewBox="0 0 18 19"
      fill="none"
    >
      <path
        d="M14.25 3H3.75C2.6895 3 2.15925 3 1.83 3.309C1.5 3.618 1.5 4.116 1.5 5.11125V5.62875C1.5 6.4065 1.5 6.79575 1.695 7.11825C1.89 7.44075 2.24475 7.64175 2.9565 8.04225L5.14125 9.27225C5.61825 9.54075 5.8575 9.675 6.0285 9.8235C6.384 10.1317 6.603 10.4948 6.702 10.941C6.75 11.154 6.75 11.4045 6.75 11.9048V13.9072C6.75 14.589 6.75 14.9302 6.939 15.1957C7.128 15.462 7.464 15.5933 8.1345 15.8558C9.54375 16.4063 10.248 16.6815 10.749 16.368C11.25 16.0552 11.25 15.339 11.25 13.9065V11.904C11.25 11.4045 11.25 11.154 11.298 10.9402C11.3922 10.5031 11.6295 10.1099 11.9723 9.82275C12.1425 9.675 12.3818 9.54075 12.8588 9.2715L15.0435 8.0415C15.7545 7.64175 16.1107 7.4415 16.305 7.119C16.5 6.7965 16.5 6.4065 16.5 5.628V5.1105C16.5 4.116 16.5 3.618 16.17 3.309C15.8415 3 15.3112 3 14.25 3Z"
        stroke="#4D4B4B"
        stroke-width="1.5"
      />
    </svg>
  </div>

  <!-- Reset Icon -->
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 17"
    fill="none"
    (click)="resetForm()"
  >
    <g clip-path="url(#clip0_235_5363)">
      <path
        d="M15.0912 3.34464L14.0841 4.13214C12.7109 2.37679 10.5751 1.25 8.17693 1.25C4.03586 1.25 0.684074 4.59821 0.678717 8.74107C0.67336 12.8875 4.03229 16.25 8.17693 16.25C11.4144 16.25 14.1734 14.1964 15.2234 11.3196C15.2501 11.2446 15.2109 11.1607 15.1359 11.1357L14.1234 10.7875C14.0881 10.7754 14.0494 10.7776 14.0157 10.7936C13.982 10.8096 13.9559 10.8382 13.943 10.8732C13.9109 10.9625 13.8751 11.0518 13.8376 11.1393C13.5287 11.8714 13.0859 12.5286 12.5216 13.0929C11.9618 13.6536 11.2991 14.1011 10.5698 14.4107C9.81443 14.7304 9.00907 14.8929 8.1805 14.8929C7.35015 14.8929 6.54657 14.7304 5.79122 14.4107C5.06117 14.1024 4.39822 13.6548 3.83943 13.0929C3.27818 12.5332 2.83119 11.8697 2.52336 11.1393C2.20372 10.3821 2.04122 9.57857 2.04122 8.74822C2.04122 7.91786 2.20372 7.11429 2.52336 6.35714C2.83229 5.625 3.27515 4.96786 3.83943 4.40357C4.40372 3.83929 5.06086 3.39643 5.79122 3.08571C6.54657 2.76607 7.35193 2.60357 8.1805 2.60357C9.01086 2.60357 9.81443 2.76607 10.5698 3.08571C11.2998 3.39401 11.9628 3.84164 12.5216 4.40357C12.6984 4.58036 12.8644 4.76786 13.018 4.96429L11.943 5.80357C11.9217 5.82003 11.9055 5.84215 11.8963 5.8674C11.887 5.89265 11.8851 5.91999 11.8907 5.9463C11.8963 5.9726 11.9092 5.99679 11.9279 6.01608C11.9467 6.03537 11.9704 6.04899 11.9966 6.05536L15.1323 6.82322C15.2216 6.84464 15.3091 6.77679 15.3091 6.68572L15.3234 3.45536C15.3216 3.3375 15.1841 3.27143 15.0912 3.34464Z"
        fill="black"
        fill-opacity="0.85"
      />
    </g>
    <defs>
      <clipPath id="clip0_235_5363">
        <rect
          width="16"
          height="16"
          fill="white"
          transform="translate(0 0.75)"
        />
      </clipPath>
    </defs>
  </svg>
</div>

<ng-container *ngIf="isOpen">
  <div
    class="absolute top-60 flex items-center justify-center w-[28.5rem] h-[20.5rem] px-[1.56rem] pt-9 pb-[3.25rem] bg-[#F8F7F7] rounded-md border border-[#CED4DA] z-50"
  >
    <div class="flex flex-col items-start gap-6 w-full">
      <!-- REACTIVE FORM -->
      <form
        [formGroup]="transactionFilterForm"
        class="flex flex-col gap-4 w-full"
      >
        <p-dropdown
          *ngIf="clients$ | async as clients"
          formControlName="clientId"
          [options]="clients"
          optionLabel="legalName"
          placeholder="Client Name*"
          [required]="true"
          [optionValue]="'id'"
        >
        </p-dropdown>
        <p-dropdown
          *ngIf="banks$ | async as banks"
          formControlName="bank"
          [options]="banks"
          optionLabel="bankName"
          placeholder="Bank Name*"
          [required]="true"
          [optionValue]="'bankName'"
        ></p-dropdown>
        <p-dropdown
          *ngIf="accounts$ | async as accounts"
          formControlName="accountNumber"
          [options]="accounts"
          optionLabel="accountNumber"
          placeholder="Account Number*"
          [required]="true"
          [optionValue]="'accountNumber'"
        ></p-dropdown>
        <p-calendar
          formControlName="date"
          view="month"
          dateFormat="mm/yy"
          placeholder="Month-Year"
          [readonlyInput]="true"
          [showIcon]="true"
        ></p-calendar>
      </form>

      <button
        class="p-[0.625rem] rounded-[0.25rem] bg-[#3B82F6] w-full hover:bg-[#2563EB] active:bg-[#1D4ED8] duration-200"
        (click)="fetchTransactions()"
      >
        <span class="text-[0.75rem] font-medium leading-[1.125rem] text-white"
          >Search</span
        >
      </button>
    </div>
  </div>
</ng-container>
